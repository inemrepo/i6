<form id="chatForm">
	<label for="title">title</label>
	<input type="text" name="title"/>
	<label for="msg">slug</label>
	<input type="text" name="msg"/>
	<input type="submit" value="Send" name=""/>
</form>

<!-- Simply include the sails.io.js script, and a client socket will be created for you -->
<script type="text/javascript" src="/js/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="/js/dependencies/sails.io.js"></script>


<script type="text/javascript">
    $('#chatForm').on('submit', function(e) { //use on if jQuery 1.7+
	    e.preventDefault();  //prevent form from submitting
	    var data = $("#chatForm :input").serializeArray().reduce(function(a, x) { a[x.name] = x.value; return a; }, {});
	    console.log(data); //use the console for debugging, F12 in Chrome, not alerts

	    io.socket.post("/chat", data, function(resData, jwRes){
	    	console.log(resData);
	    });
    });
</script>


<script type="text/javascript">
	// The automatically-created socket is exposed as io.socket.
	// Use .on() to subscribe to the 'user' event on the client.
	// This event is sent by the Sails "create", "update",
	// "delete", "add" and "remove" blueprints to any socket that
	// is subscribed to one or more User model instances.
	io.socket.on('user', function gotHelloMessage (data) {
	  console.log('User alert!', data);
	});
	// Using .get('/user') will retrieve a list of current User models,
	// subscribe this socket to those models, AND subscribe this socket
	// to notifications about new User models when they are created.
	io.socket.get('/user', function gotResponse(body, response) {
	  console.log('Current users: ', body);
	})
</script>

<script type="text/javascript">
	function reqHello(){
		io.socket.get('/say/hello', function(body, response){
			console.log(body);
		});
	}
	// The auto-connecting socket is exposed as `io.socket`.

	// Use `io.socket.on()` to listen for the 'hello' event:
	io.socket.on('hello', function (data) {
	  console.log('Socket `' + data.id + '` joined the party!');
	});
</script>